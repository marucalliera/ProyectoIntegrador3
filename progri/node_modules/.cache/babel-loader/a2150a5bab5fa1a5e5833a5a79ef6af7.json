{"ast":null,"code":"var _jsxFileName = \"/Users/mariacalliera/Desktop/ProyectoIntegrador3/progri/src/screens/detallePel/detallePel.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet apikey = '66374e925f9ce0061d8e10191732f374';\n\nclass Detail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pelicula: '',\n      textoFavorito: ''\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    let listaLocalStorage = JSON.parse(localStorage.getItem('favoritos'));\n    console.log(listaLocalStorage);\n\n    if (listaLocalStorage && listaLocalStorage.includes(parseInt(id))) {\n      this.setState({\n        textoFavorito: 'Eliminar de favoritos'\n      });\n    } else {\n      this.setState({\n        textoFavorito: 'Agregar a favoritos'\n      });\n    }\n\n    fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${apikey}`).then(response => response.json()).then(data => {\n      this.setState({\n        pelicula: data\n      });\n    }).catch(error => console.log('El error fue: ' + error));\n  }\n\n  favoritos(id) {\n    let listaFavs = [];\n    let listaLocalStorage = JSON.parse(localStorage.getItem('favoritos'));\n    let listaActualizada = [];\n\n    if (listaLocalStorage.length !== 0) {\n      listaFavs = listaLocalStorage;\n    }\n\n    if (listaFavs.includes(id)) {\n      this.setState({\n        textoFavorito: 'Agregar a favoritos'\n      });\n      listaActualizada = listaFavs.filter(elm => {\n        return elm !== id;\n      });\n    } else {\n      this.setState({\n        textoFavorito: 'Eliminar a favoritos'\n      });\n      listaActualizada = listaFavs;\n      listaActualizada.push(id);\n    }\n\n    let listaFavsJson = JSON.stringify(listaActualizada);\n    localStorage.setItem('favoritos', listaFavsJson);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: this.state.pelicula === '' ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Cargando ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 46\n      }, this) : /*#__PURE__*/_jsxDEV(\"article\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `https://image.tmdb.org/t/p/w342/${this.state.pelicula.poster_path}`,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\" \", this.state.pelicula.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: this.state.pelicula.genres.map((obj, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\" \", obj.name, \" \"]\n            }, idx + obj.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 79\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Fecha de estreno: \", this.state.pelicula.release_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Rating: \", this.state.pelicula.vote_average]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Duracion: \", this.state.pelicula.runtime, \" min\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => this.favoritos(this.state.pelicula.id),\n            children: this.state.textoFavorito\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Detail;","map":{"version":3,"names":["React","Component","apikey","Detail","constructor","props","state","pelicula","textoFavorito","componentDidMount","id","match","params","listaLocalStorage","JSON","parse","localStorage","getItem","console","log","includes","parseInt","setState","fetch","then","response","json","data","catch","error","favoritos","listaFavs","listaActualizada","length","filter","elm","push","listaFavsJson","stringify","setItem","render","poster_path","title","genres","map","obj","idx","name","release_date","vote_average","runtime"],"sources":["/Users/mariacalliera/Desktop/ProyectoIntegrador3/progri/src/screens/detallePel/detallePel.js"],"sourcesContent":["import React, {Component} from 'react';\n\n\nlet apikey = '66374e925f9ce0061d8e10191732f374'\nclass Detail extends Component{  \n    constructor(props){\n        super(props);\n        this.state = {\n            pelicula: '',\n            textoFavorito: ''\n        }\n    }\n    \n    componentDidMount () {\n        const id = this.props.match.params.id;\n        \n        let listaLocalStorage = JSON.parse(localStorage.getItem('favoritos'))\n        console.log(listaLocalStorage);\n        if(listaLocalStorage && listaLocalStorage.includes(parseInt(id))){\n           \n            this.setState({textoFavorito: 'Eliminar de favoritos'});\n        } else {\n           this.setState({textoFavorito: 'Agregar a favoritos'});\n        }\n        \n        fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${apikey}`)\n        .then(response=>response.json())\n        .then(data=> {\n            this.setState({pelicula: data})\n        })\n        .catch(error=>console.log('El error fue: ' + error))\n    }\n\n    favoritos(id) {\n        let listaFavs = [];\n        let listaLocalStorage = JSON.parse(localStorage.getItem('favoritos'))\n        let listaActualizada = []\n        if(listaLocalStorage.length !== 0) {\n            listaFavs = listaLocalStorage;\n        }\n        if(listaFavs.includes(id)){\n            this.setState({textoFavorito: 'Agregar a favoritos'});\n            listaActualizada = listaFavs.filter( (elm) => {\n                return elm !== id;\n            });\n        } else {\n           this.setState({textoFavorito: 'Eliminar a favoritos'});\n           listaActualizada = listaFavs;\n           listaActualizada.push(id);\n        }\n\n        let listaFavsJson = JSON.stringify(listaActualizada);\n        localStorage.setItem('favoritos',listaFavsJson);\n    }\n\n    render () {\n        return (\n           \n            <React.Fragment>\n                {\n                this.state.pelicula === '' ? <h3>Cargando ...</h3> : \n                    <article>\n                        <img src={`https://image.tmdb.org/t/p/w342/${this.state.pelicula.poster_path}`} alt=\"\"/>\n                        <div>\n                            <h2> {this.state.pelicula.title}</h2>\n                            <ul>\n                                {this.state.pelicula.genres.map((obj, idx) => <li key={idx+obj.name}> {obj.name} </li>)}\n                            </ul>\n                            <div>\n                                <p>Fecha de estreno: {this.state.pelicula.release_date}</p>\n                                <p>Rating: {this.state.pelicula.vote_average}</p>\n                                <p>Duracion: {this.state.pelicula.runtime} min</p>\n                            </div>\n                            <p onClick={() => this.favoritos(this.state.pelicula.id)}>{this.state.textoFavorito}</p>\n                        </div>\n                    </article>\n                }\n            </React.Fragment>\n        )\n\n    }\n}\n\nexport default Detail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}